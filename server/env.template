# ============================================
# DIAR AI Server - Environment Variables Template
# ============================================
#
# ИНСТРУКЦИЯ:
# 1. Скопируйте этот файл: cp env.template .env
# 2. Заполните все значения ниже
# 3. Для Railway: добавьте эти переменные в Settings → Variables
#
# ============================================

# ============================================
# ОБЯЗАТЕЛЬНЫЕ ПЕРЕМЕННЫЕ
# ============================================

# Database URL (PostgreSQL)
#
# КАК ПОЛУЧИТЬ (Railway):
# 1. Создайте PostgreSQL сервис в Railway
# 2. Откройте Settings → Variables
# 3. Скопируйте DATABASE_URL
#
# Формат:
DATABASE_URL=postgresql://postgres:PASSWORD@HOST:5432/railway

# JWT Secret Key
# ⚠️ ВАЖНО: Генерируйте сложный секретный ключ для продакшена!
#
# Для генерации используйте:
# node -e "console.log(require('crypto').randomBytes(64).toString('hex'))"
#
JWT_SECRET=your_jwt_secret_key_here_at_least_32_chars

# ============================================
# ОПЦИОНАЛЬНЫЕ ПЕРЕМЕННЫЕ
# ============================================

# ============================================
# GOOGLE AI SERVICES
# ============================================

# Gemini API Key (для текстовой генерации)
# Получите из: https://aistudio.google.com/apikey
GEMINI_API_KEY=your_gemini_api_key_here

# Google Cloud Project ID (для Imagen - генерация изображений)
# Получите из: https://console.cloud.google.com
GOOGLE_CLOUD_PROJECT_ID=your_gcp_project_id

# Google Cloud Region (по умолчанию us-central1)
GOOGLE_CLOUD_LOCATION=us-central1

# Google Cloud Service Account JSON (для аутентификации)
# Вставьте JSON сервисного аккаунта в одну строку или используйте файл
# GOOGLE_APPLICATION_CREDENTIALS_JSON={"type":"service_account",...}
# ИЛИ путь к файлу:
# GOOGLE_APPLICATION_CREDENTIALS=/path/to/service-account.json

# Node Environment
# Значения: development, production, test
NODE_ENV=production

# Server Port (по умолчанию 3001)
PORT=3001

# Backend URL (для формирования публичных URL)
# На Railway устанавливается автоматически
BACKEND_URL=https://your-backend.railway.app

# Frontend URL (для CORS и redirect URL после оплаты)
FRONTEND_URL=https://your-frontend.railway.app

# ============================================
# ЛОКАЛЬНОЕ ХРАНИЛИЩЕ ФАЙЛОВ
# ============================================

# Директория для загрузки файлов
# На Railway используйте Volume: /app/uploads
UPLOADS_DIR=/app/uploads

# Максимальный размер файла (в байтах)
# По умолчанию: 10MB = 10485760
MAX_FILE_SIZE=10485760

# ============================================
# MESSENGER SERVICE
# ============================================

# URL микросервиса мессенджеров
MESSENGER_SERVICE_URL=https://your-messenger-service.railway.app

# API ключ для связи между backend и messenger-service
# Генерируйте случайный ключ для безопасности
MESSENGER_API_KEY=your_messenger_api_key_here

# ============================================
# RATE LIMITING (настроено автоматически)
# ============================================
# Rate Limiting настроен автоматически для защиты от злоупотребления API:
# - Общий лимит: 100 запросов в минуту на IP
# - AI endpoints: 20 запросов в минуту на пользователя
# - Создание данных (POST): 30 запросов в минуту на пользователя
# - Webhooks: 100 запросов в минуту на IP
#
# Лимиты можно настроить в server/src/middleware/rateLimit.middleware.ts

# ============================================
# ЛОГИРОВАНИЕ И МОНИТОРИНГ
# ============================================

# Sentry DSN (опционально, для мониторинга ошибок)
#
# КАК ПОЛУЧИТЬ:
# 1. Зарегистрируйтесь на https://sentry.io
# 2. Создайте новый проект (Node.js)
# 3. Скопируйте DSN из настроек проекта
#
# Формат: https://xxxxx@xxxxx.ingest.sentry.io/xxxxx
# SENTRY_DSN=https://xxxxx@xxxxx.ingest.sentry.io/xxxxx

# Уровень логирования
# Значения: error, warn, info, http, verbose, debug, silly
# По умолчанию: info (production), debug (development)
# LOG_LEVEL=info

# ============================================
# ПЕРЕМЕННЫЕ ДЛЯ ИНТЕГРАЦИИ С KASPI.KZ
# ============================================

# Kaspi.kz Merchant ID
#
# КАК ПОЛУЧИТЬ:
# 1. Зарегистрируйтесь в Kaspi Merchant: https://kaspi.kz/merchant
# 2. После регистрации вы получите Merchant ID
# 3. Скопируйте его сюда
#
# Формат:
KASPI_MERCHANT_ID=your_merchant_id_here

# Kaspi.kz API Key
#
# КАК ПОЛУЧИТЬ:
# 1. Войдите в личный кабинет Kaspi Merchant
# 2. Перейдите в раздел "API" или "Настройки API"
# 3. Создайте новый API ключ или скопируйте существующий
# 4. ⚠️ ВАЖНО: Храните ключ в секрете! Никогда не коммитьте в Git!
#
# Формат:
KASPI_API_KEY=your_kaspi_api_key_here

# Kaspi.kz Webhook Secret
#
# КАК ПОЛУЧИТЬ:
# 1. В личном кабинете Kaspi Merchant перейдите в "Webhooks" или "Уведомления"
# 2. Создайте webhook endpoint или скопируйте секретный ключ для подписи
# 3. Укажите URL вашего webhook: https://your-server.com/api/payments/kaspi/webhook
# 4. Скопируйте секретный ключ сюда
#
# Формат:
KASPI_WEBHOOK_SECRET=your_webhook_secret_here

# ============================================
# EMAIL SERVICE (опционально)
# ============================================

# API ключ для email сервиса (Resend, SendGrid и т.д.)
# EMAIL_API_KEY=your_email_api_key_here

# ============================================
# DEVELOPMENT (только для локальной разработки)
# ============================================

# Использовать devAuthMiddleware для разработки (только для development)
# ⚠️ ВАЖНО: В production всегда используется authMiddleware (JWT токены)
# Установите USE_DEV_AUTH=true только для локальной разработки
# Значения: true, false (по умолчанию false)
# USE_DEV_AUTH=false
